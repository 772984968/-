<?phpnamespace lib\wyim;use yii\extend\AdCommon;use Yii;class curl{    private $curl;    private $app_key;    private $app_secret;    public function __construct()    {        $this->app_key = Yii::$app->params['wy_app_key'];        $this->app_secret = Yii::$app->params['wy_app_secret'];    }    public function post($data,$url)    {        $data = http_build_query($data);        curl_setopt($this->curl,CURLOPT_URL,$url);        curl_setopt($this->curl,CURLOPT_HEADER,0);        curl_setopt($this->curl,CURLOPT_POST,1);        curl_setopt($this->curl,CURLOPT_POSTFIELDS,$data);        curl_setopt($this->curl,CURLOPT_RETURNTRANSFER,true);        $return = curl_exec($this->curl);        if( !curl_errno($this->curl) ) {            return $return;        } else {            return false;        }    }    public function get($url)    {        curl_setopt($this->curl,CURLOPT_URL,$url);        curl_setopt($this->curl,CURLOPT_RETURNTRANSFER,true);        $output = curl_exec($this->curl);        return $output;    }    public function gets($url)    {        curl_setopt($this->curl,CURLOPT_URL,$url);        curl_setopt($this->curl,CURLOPT_SSL_VERIFYPEER,false);        curl_setopt($this->curl,CURLOPT_RETURNTRANSFER,true);        $output = curl_exec($this->curl);        return $output;    }    public function posts($data,$url)    {        $Nonce = AdCommon::randomkeys(20);        $CurTime = time();        $this->curl = curl_init();        $header = [];        $header[] = 'Content-Type:application/x-www-form-urlencoded;charset=utf-8';        $header[] = 'AppKey:'.$this->app_key;        $header[] = 'Nonce:'.$Nonce;        $header[] = 'CurTime:'.$CurTime;        $header[] = 'CheckSum:'. sha1($this->app_secret . $Nonce . $CurTime);        curl_setopt($this->curl, CURLOPT_HTTPHEADER, $header);        $data = http_build_query($data);        curl_setopt($this->curl,CURLOPT_SSL_VERIFYPEER,false);        curl_setopt($this->curl,CURLOPT_URL,$url);        curl_setopt($this->curl,CURLOPT_HEADER,0);        curl_setopt($this->curl,CURLOPT_POST,1);        curl_setopt($this->curl,CURLOPT_POSTFIELDS,$data);        curl_setopt($this->curl,CURLOPT_RETURNTRANSFER,true);        $return = curl_exec($this->curl);        if( !curl_errno($this->curl) ) {            return json_decode($return);        } else {            return false;        }    }    public function postsJson($data,$url)    {        $Nonce = AdCommon::randomkeys(20);        $CurTime = time();        $this->curl = curl_init();        $header = [];        $header[] = 'Content-Type:application/json;charset=utf-8';        $header[] = 'AppKey:'.$this->app_key;        $header[] = 'Nonce:'.$Nonce;        $header[] = 'CurTime:'.$CurTime;        $header[] = 'CheckSum:'. sha1($this->app_secret . $Nonce . $CurTime);        curl_setopt($this->curl, CURLOPT_HTTPHEADER, $header);        curl_setopt($this->curl,CURLOPT_SSL_VERIFYPEER,false);        curl_setopt($this->curl,CURLOPT_URL,$url);        curl_setopt($this->curl,CURLOPT_HEADER,false);        curl_setopt($this->curl,CURLOPT_POST,1);        curl_setopt($this->curl,CURLOPT_POSTFIELDS,json_encode($data));        curl_setopt($this->curl,CURLOPT_RETURNTRANSFER,true);        $return = curl_exec($this->curl);        if( !curl_errno($this->curl) ) {            return json_decode($return);        } else {            return false;        }    }    public function __destruct()    {        curl_close($this->curl);    }}