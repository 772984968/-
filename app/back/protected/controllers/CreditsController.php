<?phpnamespace app\controllers;use yii\web\Controller;use Yii;use lib\models\User;class CreditsController extends Controller{    //评论接口添加积分    public function actionAddcomment(){        $user_id=\Yii::$app->request->post('user_id');        if (!User::findIdentity($user_id)||empty($user_id)){            return json_encode(['code'=>400,'message'=>'该用户不存在']);        }        $creditsClass=\Yii::$app->factory->getCredits($user_id);        if ($creditsClass->comment()){            return json_encode(['code'=>200,'message'=>'success']);        }else{            return json_decode(['code'=>400,'message'=>$creditsClass->error]);        }    }    //刷礼物接口添加积分    public  function actionAddgift(){        $number=\Yii::$app->request->post('number');        $user_id=\Yii::$app->request->post('user_id');        if (!User::findIdentity($user_id)||empty($user_id)){            return json_encode(['code'=>400,'message'=>'该用户不存在']);        }        if (!is_numeric($number)||empty($number)){            return json_encode(['code'=>400,'message'=>'请给出刷钻石数量！']);        }        $creditsClass=\Yii::$app->factory->getCredits($user_id);        if ($creditsClass->gift($number,0)){            return json_encode(['code'=>200,'message'=>'success']);        }else{            return json_decode(['code'=>400,'message'=>$creditsClass->error]);        }    }    //点赞接口添加积分    public  function actionAddpraise(){        $user_id=\Yii::$app->request->post('user_id');        if (!User::findIdentity($user_id)||empty($user_id)){            return json_encode(['code'=>400,'message'=>'该用户不存在']);        }        $creditsClass=\Yii::$app->factory->getCredits($user_id);        if ($creditsClass->praise()){            return json_encode(['code'=>200,'message'=>'success']);        }else{            return json_decode(['code'=>400,'message'=>$creditsClass->error]);        }    }    //分享接口添加积分    public  function actionAddsharing(){        $user_id=\Yii::$app->request->post('user_id');        if (!User::findIdentity($user_id)||empty($user_id)){            return json_encode(['code'=>400,'message'=>'该用户不存在']);        }        $creditsClass=\Yii::$app->factory->getCredits($user_id);        if ($creditsClass->sharing()){            return json_encode(['code'=>200,'message'=>'success']);        }else{            return json_decode(['code'=>400,'message'=>$creditsClass->error]);        }    }    //邀请会员添加积分    public  function actionAddmembers(){        $invite_userid=\Yii::$app->request->post('invite_userid');        $user_id=\Yii::$app->request->post('user_id');        if (empty($invite_userid)){            return json_encode(['code'=>400,'message'=>'邀请用户id不能为空']);        }        if (!User::findIdentity($user_id)||empty($user_id)){            return json_encode(['code'=>400,'message'=>'该用户不存在']);        }        $creditsClass=\Yii::$app->factory->getCredits($user_id);        if ($creditsClass->invitemembers($invite_userid)){            return json_encode(['code'=>200,'message'=>'success']);        }else{            return json_decode(['code'=>400,'message'=>$creditsClass->error]);        }    }    //用户直播接口添加积分    public  function actionAddlive(){        $long=\Yii::$app->request->post('long');        if (!is_numeric($long)||empty($long)){            return json_encode(['code'=>400,'message'=>'请给出直播时长！']);        }        $user_id=\Yii::$app->request->post('user_id');        if (!User::findIdentity($user_id)||empty($user_id)){            return json_encode(['code'=>400,'message'=>'该用户不存在']);        }        $creditsClass=\Yii::$app->factory->getCredits($user_id);        if ($creditsClass->live($long)){            return json_encode(['code'=>200,'message'=>'success']);        }else{            return json_decode(['code'=>400,'message'=>$creditsClass->error]);        }    }}