<?phpnamespace api\controllers;use Yii;use yii\extend\AdCommon;use lib\models\VipVideo;use lib\models\VideoList;use lib\models\Channel;class VipvideoController extends BasisController{    public function actionList()    {        $isNext = Yii::$app->getRequest()->post('isNext');        $userId = Yii::$app->factory->getuser()->userId;        $this->success(['list'=>VipVideo::list($userId,$isNext)]);    }    public function actionGetinfo()    {        $id = Yii::$app->getRequest()->post('id');        if(!$id) {            $this->error('请上传id');        }        $result = \lib\wyim\video::getinfo($id);        if($result)        {            $this->success($result);        }        else        {            $this->error('获取数据失败!');        }    }    //保存视频接口    public function actionSavevideo(){        $userModel=\Yii::$app->factory->getuser();        if ($userModel->vip_type!=5){            return $this->error('您不是VIP用户');        }        $data=\Yii::$app->request->post();        $cid=$data['cid'];        $type=$data['type'];        $videoListModel=VideoList::find()->where(['cid'=>$cid,'user_id'=>null])->orderBy('iid desc')->one();       if (!$videoListModel){          $this->error('没有等待操作的文件');       }        if ($type==0){            if ($videoListModel->delete()){                $this->success();            }        }elseif ($type==1){            $videoListModel->user_id=$userModel->iid;            if ($videoListModel->save()){                $this->success();            }else{                $this->error('保存失败,请重试');            }        }    }    //用户保存直播列表    public  function actionSavevideolist(){        $userModel=\Yii::$app->factory->getuser()->userId;        $channel=Channel::findOne(['user_id'=>$userModel]);        $cid=$channel->cid;        if (!$channel){            $this->error('未创建直播间');            return false;         }        $videoListModel=VideoList::find()->where(['cid'=>$cid,'user_id'=>$userModel])->asArray()->all();        $this->success($videoListModel);   }}