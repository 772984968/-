<?phpnamespace api\controllers;use Yii;use lib\models\User;use lib\models\Feedback;class OtherController extends BasisController{    //覆盖父类init,取消验证    public function init(){    }    public function actionBannerNotice()    {        $query = \lib\models\Ads::getCacheList();        $list = [];        $keyName = [1=>'banner', 2=>'hot_ping', 3=>'hot_yi'];        foreach($query as $row) {            if(in_array($row['type'],[1,2,3])) {                $type = $row['type'];                unset($row['type']);                unset($row['id']);                unset($row['addtime']);                unset($row['listorder']);                $list[$keyName[$type]][] = $row;            }        }        $this->success($list);    }/** * * @return \api\controllers\type *用户反馈接口 */    public function actionFeetback(){        parent::init();        $user_id=\Yii::$app->factory->getuser()->userId;        $content=\Yii::$app->request->post('content');        $feetback=new Feedback();        $sum=$feetback->find()->where(['user_id'=>$user_id])->andWhere("create_time>".time()-3600*24)->count();        if ($sum>=2)        {            return $this->error('您反馈的次数太多了');        }        $feetback->content=htmlspecialchars($content);        $feetback->user_id=$user_id;        $feetback->create_time=time();        if ($feetback->save()){            $this->success('成功');        }else{            $this->error('失败');        }    }}