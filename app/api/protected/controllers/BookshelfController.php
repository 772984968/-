<?phpnamespace api\controllers;use lib\models\BookShelf;use Yii;//书架class BookshelfController extends BasisController{    public function actionAdd()    {        $data = Yii::$app->getRequest()->post('BookShelfForm');        $data['user_id'] = Yii::$app->factory->getuser()->userId;        $book_id = $data['book_id'] ?? 0;        if(BookShelf::findOne(['user_id'=>$data['user_id'], 'book_id'=>$book_id])) {            $this->error('已经加入书架了!');        }        $model = new BookShelf();        $model->attributes = $data;        if($model->save()) {            $this->success($model->attributes);        } else {            $this->error($model);        }    }        public function actionDelete() {        $id = Yii::$app->getRequest()->post('id');        $userId = Yii::$app->factory->getuser()->userId;        $model = BookShelf::findOne(['iid'=>$id, 'user_id'=>$userId]);        if($model && $model->delete()) {            $this->success(['id'=>$id]);        } else {            $this->error($model);        }    }    public function actionList() {        $userId = Yii::$app->factory->getuser()->userId;        $isNext = Yii::$app->getRequest()->post('isNext');        $this->success(['list'=>BookShelf::list(['user_id'=>$userId],$isNext)]);    }}