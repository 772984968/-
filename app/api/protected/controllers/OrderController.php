<?phpnamespace api\controllers;use Yii;use lib\models\Order;use yii\extend\AdCommon;class OrderController extends BasisController{    public function init(){    }    //创建定单    public function actionCreate()    {        parent::init();        parent::baseAction('\lib\forms\OrderForm', 'create');    }    //生成支付签名    public function actionPay()    {        parent::init();        parent::baseAction('\lib\forms\OrderForm', 'pay');    }    //支付宝回调    public function actionAli()    {        $aop = new \yii\aop\AopClient;        $post = \Yii::$app->request->post();        \lib\models\CodeLog::addlog('ali', $post);        $flag = $aop->rsaCheckV1($post, NULL, "RSA2");        if( $flag ) {            $trade_status = $post['trade_status'];            if( $trade_status == 'TRADE_SUCCESS' ) {                $order_sn = $post['out_trade_no'];                $order_model = Order::findOne(['order_sn'=>$order_sn]);                $order_model->payOk();                $this->success();            }        }    }}