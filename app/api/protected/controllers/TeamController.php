<?phpnamespace api\controllers;use Yii;use lib\forms\TeamForm;use lib\models\Team;use lib\models\TeamMember;//群控制器class TeamController extends BasisController{    //查找    public function actionFind()    {        $rq = Yii::$app->getRequest();        $keyword = $rq->post('keyword');        if(!$keyword) {            $this->error('请输入关键字');        }        $isNext = $rq->post('isNext');        $data = Team::list(['like', 'name', $keyword.'%', false],$isNext);        $this->success(['list'=>$data]);    }    //创建    public function actionCreate(){        parent::baseAction('\lib\forms\TeamForm', 'create');    }    //申请加群    public function actionApply(){        parent::baseAction('\lib\forms\TeamForm', 'apply');    }    //解释群    public function actionRemove(){    }    //拉人入群    public function actionAdd(){        parent::baseAction('\lib\forms\TeamForm', 'add');    }    //踢人出群    public function actionKick() {        parent::baseAction('\lib\forms\TeamForm', 'kick');    }    //群信息    public function actionInfo() {        $id = intval(Yii::$app->getRequest()->post('id'));        if(!$id) {            $this->error('参数错误');        }        $result = Team::findOne($id)->toArray();        if(!$result) {            $this->error('找不到数据');        }        $this->success($result);    }    //群成员列表    public function actionMember() {        $tid = intval(Yii::$app->getRequest()->post('tid'));        if(!$tid) {            $this->error('参数错误');        }        $user_id = Yii::$app->factory->getuser()->userId;        if(!TeamMember::inTeam($user_id, $tid)) {            $this->error('您还未加入该群');        }        $result = TeamMember::getMembers($tid);        $this->success($result);    }    //加入的群列表    public function actionJoinTeams() {        $user_id = Yii::$app->factory->getuser()->userId;        $isNext = Yii::$app->getRequest()->post('isNext');        $data = TeamMember::list(['user_id'=>$user_id], $isNext, 'teaminfo');        if($data) {            $data = TeamMember::formartListData($data);        }        $this->success(['list'=>$data]);    }    //自己创建的群列表    public function actionMyTeams() {        $isNext = Yii::$app->getRequest()->post('isNext');        $user_id = Yii::$app->factory->getuser()->userId;        $data = Team::list(['user_id'=>$user_id], $isNext);        $this->success(['list' => $data]);    }}